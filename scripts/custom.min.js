$(document).ready((function(){var e=[];$("body").find(".custom-list").each((function(){e.push($(this))})),e.forEach((function(e,t,o){var l=e,i=$("<div>",{class:"custom-select",html:'<div class="selectBox"></div>'}),d=$("<ul>",{class:"dropDown"}),a=i.find(".selectBox");l.find("option").each((function(e){var t=$(this);0==e&&a.html(t.text());var o=$("<li>",{html:t.text()});o.on("click touchstart",(function(){return a.html(t.text()),d.trigger("hide"),l.val(t.val()),!1})),d.append(o)})),i.append(d.hide()),l.hide().after(i),d.bind("show",(function(){if(d.is(":animated"))return!1;a.addClass("expanded"),d.slideDown()})).bind("hide",(function(){if(d.is(":animated"))return!1;a.removeClass("expanded"),d.slideUp()})).bind("toggle",(function(){a.hasClass("expanded")?d.trigger("hide"):d.trigger("show")})),a.on("click touchstart",(function(){return d.trigger("toggle"),!1})),$(document).on("click touchstart",(function(){d.trigger("hide")}))}));const t={click_top_menu_link_1:'.header-hide__list [href="#reasons"]',click_top_menu_link_2:'.header-hide__list [href="#feedback"]',click_top_menu_link_3:'.header-hide__list [href="#proizvoditel"]',click_top_menu_link_4:'.header-hide__list [href="#delivery"]',click_top_zakaz_zvonka_1:'.header-hide__call[href="#callme"]',click_top_zakaz_zvonka_2:'#callme [type="submit"]',click_header_sobrat_bulat:'#top-form [href="/soberi-bulat"]',click_header_zakazat:'#top-form [href="#order-modal"]',click_zazhimy:"#reasons .button-start-video",click_models_no_ten:"#models .no_ten",click_models_with_ten:"#models .with_ten",click_models_13l:'#models [data-model="1"]',click_models_18l:'#models [data-model="2"]',click_models_25l:'#models [data-model="3"]',click_models_32l:'#models [data-model="4"]',click_models_13l_ten:'#models [data-model="5"]',click_models_18l_ten:'#models [data-model="6"]',click_models_25l_ten:'#models [data-model="7"]',click_models_32l_ten:'#models [data-model="8"]',click_dop_zazhimy:'#dop [data-name="dop_zk"]',click_dop_nasadka:'#dop [data-name="dop_sa"]',click_dop_nabor:'#dop [data-name="dop_kopt"]',click_dop_zakat:'#dop [data-name="dop_zkt"]',click_zakazat_po_akcii:'#sale [type="submit"]',click_rasschitat:'#delivery [href="#order-modal"]',click_bottom_zakaz_zvonka:'#call-modal [type="submit"]'};function o(e,t){var o=0;switch(e){case"classic":"13l"===t&&(o=1),"18l"===t&&(o=2),"25l"===t&&(o=3),"32l"===t&&(o=4);break;case"ten":"13l"===t&&(o=5),"18l"===t&&(o=6),"25l"===t&&(o=7),"32l"===t&&(o=8);break;case"ten_by":"13l"===t&&(o=9),"18l"===t&&(o=10),"25l"===t&&(o=11),"32l"===t&&(o=12)}return o}function l(){$(".mobile-slider").slick({infinite:!0,arrows:!0,dots:!1,adaptiveHeight:!0,slidesToShow:1,slidesToScroll:1})}var i;$.each(t,(function(e){$(t[e]).on("click",(function(){!function(e){window.dataLayer.push({event:e}),console.log("Добавлено событие: "+e)}(e)}))})),$(".step__info").on("click",(function(){$(this).closest(".step").find(".img-container").toggleClass("opened")})),$(".models-nav_ten button").on("click touchstart",(function(){$(this).hasClass("active")||($(".models-nav_ten button.active").removeClass("active"),$(this).addClass("active"),$(this).hasClass("with_ten")?($("#models .model__img_1").hide(),$("#models .model__img_2").show(),$("#models .model__img_3").hide(),$("#models .not-ten").hide(),$("#models .ten_by").hide(),$("#models .ten").show(200)):$(this).hasClass("no_ten")?($("#models .model__img_1").show(),$("#models .model__img_2").hide(),$("#models .model__img_3").hide(),$("#models .not-ten").show(200),$("#models .ten").hide(),$("#models .ten_by").hide()):$(this).hasClass("with_ten_by")&&($("#models .model__img_1").hide(),$("#models .model__img_2").hide(),$("#models .model__img_3").show(),$("#models .not-ten").hide(),$("#models .ten").hide(),$("#models .ten_by").show(200)))})),$(".models-nav_mobile button").on("click",(function(){let e=$(this),t=e.data("model");e.hasClass("active")||($(".models-nav_mobile button.active").removeClass("active"),e.addClass("active"),$("#models .model.active").removeClass("active"),$("#models .model."+t).addClass("active"))})),$(".fancybox").fancybox({touch:!1}),$(".fancybox-cart").fancybox({touch:!1}),$(".row__item").click((function(e){$(".row__item").removeClass("row__item__active"),$(this).addClass("row__item__active")})),$(".row2__item").click((function(e){$(".row2__item").removeClass("row2__item__active"),$(this).addClass("row2__item__active")})),$(".row__item__click").click((function(e){var t=o($(".row__item__active").data("model"),$(".row2__item__active").data("model")),l=new CountUp("oldPriceCount",parseInt($(".old_price-test span").text().replace(/\s+/g,"")),parseInt($(".hidden-select select ").find("[data-model="+t+"]").data("oldprice").replace(/\s+/g,"")),0,.5),i=new CountUp("newPriceCount",parseInt($(".new_price-test span").text().replace(/\s+/g,"")),parseInt($(".hidden-select select ").find("[data-model="+t+"]").data("price").replace(/\s+/g,"")),0,.5);l.start(),i.start()})),$(".btn-test").click((function(e){var t=$(".row__item__active").data("model"),l=$(".row2__item__active").data("model");$(this).data().model=o(t,l)})),$('[href="#order-modal"]').on("click",(function(){var e=$(this).data("name")?$(this).data("name"):null,t=$(this).data("model")?$(this).data("model"):null,o=$(this).data("delivery")?$(this).data("delivery"):null;t?$("#order-modal .custom-select li:nth-child("+t+")").click():e?($("#order-modal .custom-select li:first").click(),$('#order-modal .custom-checkbox-js[data-name="'+e+'"]').click()):$("#order-modal .custom-select li:first").click(),o?$("#order-modal form").prepend('<input type="hidden" class="delivery" name="statePanel" value="calcDelivery">'):$("#order-modal .delivery").remove()})),$('[href="#order-modal-recomendation"]').on("click",(function(){var e=$(this).data("name")?$(this).data("name"):null,t=$(this).data("model")?$(this).data("model"):null,o=$(this).data("delivery")?$(this).data("delivery"):null;t?$("#order-modal-recomendation .custom-select li:nth-child("+t+")").click():e?($("#order-modal-recomendation .custom-select li:first").click(),$('#order-modal-recomendation .custom-checkbox-js[data-name="'+e+'"]').click()):$("#order-modal-recomendation .custom-select li:first").click(),o?$("#order-modal-recomendation form").prepend('<input type="hidden" class="delivery" name="statePanel" value="calcDelivery">'):$("#order-modal-recomendation .delivery").remove()})),$(".custom-select li").on("click touchstart",(function(){let e=$(this).closest(".columns"),t=$(this).closest("form").find(".custom-list").val(),o=$(this).closest("form").find("option[value="+t+"]"),l=o.data("img"),i=o.data("oldprice"),d=o.data("price"),a=o.data("discount");e.find(".custom-checkbox-js").each((function(){$(this).is(":checked")&&$(this).click()})),$("#order-modal img").attr("src",l),e.find(".discount").text(a),e.find(".old-price span").text(i),e.find(".new-price span").text(d),e.find(".main_product_q").attr("name","quantity["+t+"]")})),document.documentElement.clientWidth<768&&l(),$(window).resize((function(){document.documentElement.clientWidth<768?$(".mobile-slider").hasClass("slick-slider")||l():$(".mobile-slider").hasClass("slick-slider")&&$(".mobile-slider").slick("unslick")})),$(".feedback-slider__slider").slick({nextArrow:".feedback-slider__control_next",prevArrow:".feedback-slider__control_prev",slidesToShow:3,slidesToScroll:1,lazyLoad:"ondemand",infinite:!0,dots:!1,responsive:[{breakpoint:640,settings:{slidesToShow:2}},{breakpoint:480,settings:{slidesToShow:1}}]}),$(".header-hide__wrapper .header-hide__list li a:not(.header__link_active)").on("click touchstart",(function(){$(".header-hide__wrapper .header-hide__list").toggleClass("header-hide_visible"),setTimeout((function(){$(".header-hide__wrapper .header-hide__list").toggleClass("opacity__animation"),$(".header-hide__wrapper .header-hide__menu").toggleClass("header-hide__menu_open")}),10);var e=$(this).attr("href");return $("html, body").animate({scrollTop:$(e).offset().top},500),!1})),$(".header-hide__wrapper .header-hide__menu .relative__close").on("click",(function(){$(".header-hide__wrapper .header-hide__list").toggleClass("header-hide_visible"),setTimeout((function(){$(".header-hide__wrapper .header-hide__list").toggleClass("opacity__animation"),$(".header-hide__wrapper .header-hide__menu").toggleClass("header-hide__menu_open")}),10)})),$(".terka__block a").on("click touchstart",(function(){var e=$(this).attr("href");$("html, body").animate({scrollTop:$(e).offset().top},500)})),i=".button-up",$(window).scroll((function(){$(this).scrollTop()>1e3?$(i).fadeIn(1e3):$(i).fadeOut(1e3)})),$(i).click((function(){$("body, html").animate({scrollTop:0},800)}));const d=$("#tinkoff-block .new-price span"),a=$("#tinkoff-block .old-price span").text().replace(/\s+/g,"");var n;d.text((n=Math.floor(Number(a)/4),new Intl.NumberFormat("ru-RU").format(n))),$(".review-slider__slider").slick({nextArrow:".review-slider__control_next",prevArrow:".review-slider__control_prev",slidesToShow:3,slidesToScroll:1,infinite:!0,dots:!1,responsive:[{breakpoint:640,settings:{slidesToShow:2}},{breakpoint:480,settings:{slidesToShow:1}}]}),$(".text-feedback-slider__slider").slick({nextArrow:".text-feedback-slider__control_next",prevArrow:".text-feedback-slider__control_prev",slidesToShow:3,slidesToScroll:1,infinite:!0,dots:!1,responsive:[{breakpoint:1024,settings:{slidesToShow:2}},{breakpoint:580,settings:{slidesToShow:1}}]}),$("#compare-v3 .compare-wrapper").slick({nextArrow:".compare-wrapper__control-next",prevArrow:".compare-wrapper__control-prev",slidesToShow:2,slidesToScroll:1,lazyLoad:"ondemand",infinite:!1,dots:!1,responsive:[{breakpoint:769,settings:{slidesToShow:1}}]}),$("#tby-bulat .tby-bulat__easyslider").on("afterChange",(function(e,t,o){var l=$("#tby-bulat .tby-bulat__easyslider").find(".tby-bulat__easyslider-item").length,i=$("#tby-bulat .tby-bulat__easyslider").slick("slickGetOption","slidesToShow");$(".tby-bulat__easyslider__control-count .view").text(o+1),$(".tby-bulat__easyslider__control-count .all").text(l-i+1)})),$("#tby-bulat .tby-bulat__easyslider").slick({nextArrow:".tby-bulat__easyslider__control-next",prevArrow:".tby-bulat__easyslider__control-prev",slidesToShow:5,slidesToScroll:1,lazyLoad:"ondemand",infinite:!1,dots:!1,responsive:[{breakpoint:1440,settings:{slidesToShow:4}},{breakpoint:992,settings:{slidesToShow:3}},{breakpoint:768,settings:{slidesToShow:2}},{breakpoint:580,settings:{slidesToShow:1}}]}),$("#tby-bulat .tby-bulat__easyslider__control-prev").trigger("click"),$(".review .text-feedback-slider__item ").on("click",(function(){if("hidden-detali-button"==event.target.classList.value)if($(this).find(".hidden-detali").hasClass("hidden-detali-visible")){$(this).find(".hidden-detali").removeClass("hidden-detali-visible");for(var e=0;e<document.querySelectorAll(".hidden-detali").length;e++)document.querySelectorAll(".hidden-detali")[e].classList.remove("hidden-detali-visible"),document.querySelectorAll(".hidden-detali-button")[e].textContent="Подробнее"}else{for(e=0;e<document.querySelectorAll(".hidden-detali").length;e++)document.querySelectorAll(".hidden-detali")[e].classList.remove("hidden-detali-visible"),document.querySelectorAll(".hidden-detali-button")[e].textContent="Подробнее";$(this).find(".hidden-detali").addClass("hidden-detali-visible"),$(this).find(".hidden-detali-button").text("Скрыть")}}));const s=document.querySelector("#uploadArea"),r=document.querySelector("#dropZoon"),c=document.querySelector("#fileInput"),m=document.querySelector("#dropZoon__img-container"),_=document.querySelector("#uploadedFileInfo"),u=document.querySelector("#fileDetails"),h=document.querySelector("#uploadedFile"),p=["jpeg","jpg","bmp","png","svg","gif"];function v(e){m.children.length-1>0?(document.querySelectorAll(".previewImage_container")[e].remove(),document.querySelectorAll(".uploaded-file__info-row")[e].remove()):(document.querySelectorAll(".previewImage_container")[e].remove(),document.querySelectorAll(".uploaded-file__info-row")[e].remove(),r.classList.remove("drop-zoon--Uploaded"),h.classList.remove("uploaded-file--open"),u.classList.remove("file-details--open")),function(){for(var e=0;e<document.querySelectorAll(".uploaded-file__close").length;e++)document.querySelectorAll(".uploaded-file__close")[e].dataset.num=e}()}function f(e){const t=new FileReader;if(function(e,t){let o=p.filter((t=>-1!==e.indexOf(`image/${t}`)));return 0!==o.length?t<=512e3||alert("Файл слишком большой"):alert("Неизвестный формат файла")}(e.type,e.size)&&m.children.length<5){var o=document.createElement("div");o.classList.add("previewImage_container");var l=document.createElement("img");l.classList.add("drop-zoon__preview-image"),r.classList.add("drop-zoon--Uploaded"),l.style.display="none",h.classList.remove("uploaded-file--open"),t.addEventListener("load",(function(){setTimeout((function(){s.classList.add("upload-area--open"),l.style.display="block",u.classList.add("file-details--open"),h.classList.add("uploaded-file--open")}),500),l.setAttribute("src",t.result);var o=document.createElement("div");o.classList.add("uploaded-file__info-row");var i=document.createElement("p");i.textContent=e.name,i.classList.add("uploaded-file__name");var d=document.createElement("p");d.textContent="x",d.classList.add("uploaded-file__close"),d.dataset.num=document.querySelectorAll(".uploaded-file__close").length,d.onclick=function(){v(d.dataset.num)},o.appendChild(i),o.appendChild(d),_.appendChild(o)})),t.readAsDataURL(e),o.appendChild(l),m.appendChild(o)}}r.addEventListener("dragover",(function(e){e.preventDefault(),r.classList.add("drop-zoon--over")})),r.addEventListener("dragleave",(function(e){r.classList.remove("drop-zoon--over")})),r.addEventListener("drop",(function(e){e.preventDefault(),r.classList.remove("drop-zoon--over");f(e.dataTransfer.files[0])})),r.addEventListener("click",(function(e){c.click()})),c.addEventListener("change",(function(e){f(e.target.files[0])}));var k=!1;function b(){for(var e=0;e<document.querySelectorAll(".review-modal-input--input").length;e++)document.querySelectorAll(".review-modal-input--input")[e].value="",document.querySelectorAll(".review-modal-input--input")[e].classList.remove("unvalid");m.replaceChildren(),_.replaceChildren(),r.classList.remove("drop-zoon--Uploaded"),h.classList.remove("uploaded-file--open"),u.classList.remove("file-details--open")}$(".fancybox-review").fancybox({touch:!1,closeExisting:!0,afterClose:function(){k&&($.fancybox.open({src:"#review-modal-success",type:"inline"}),k=!1),b()}}),$("#review-modal .review-modal-button button").click((function(e){e.preventDefault();for(var t=!0,o=0;o<document.querySelectorAll(".review-modal-input--input").length;o++)""==document.querySelectorAll(".review-modal-input--input")[o].value?(document.querySelectorAll(".review-modal-input--input")[o].classList.add("unvalid"),t=!1):(document.querySelectorAll(".review-modal-input--input")[o].classList.remove("unvalid"),t=!0);t&&(k=!0,$("#review-modal .fancybox-button.fancybox-close-small").trigger("click"),b(),$('#review .text-feedback-slider__button a[href$="#review-modal"]').addClass("btn-test_unactive"),$('#review .text-feedback-slider__button a[href$="#review-modal"]').text("Отзыв отправлен"),$('#review .text-feedback-slider__button a[href$="#review-modal"]').attr("href","#review-modal-success"))}));for(var w=0;w<document.querySelectorAll(".review-modal-input--input").length;w++)document.querySelectorAll(".review-modal-input--input")[w].addEventListener("change",(function(){console.log(this),this.classList.remove("unvalid")}));$(".promocode-input").on("change keyup input click",(function(){this.value=this.value.replace(/[^0-9]/g,"")}))}));